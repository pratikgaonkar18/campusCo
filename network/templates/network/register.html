{% extends "network/layout2.html" %}

{% load static %}

{% block title %}
    Sign Up | Network
{% endblock %}

{% block script %}
    <script type"text/javascript" src="{% static 'network/signup.js' %}"></script>
{% endblock %}

{% block body %}
<div class=" w-screen h-screen grid grid-cols-2 font-inter  ">
    <div class=" w-full h-full flex justify-center items-center bg-white relative ">

        <div class="bg-transparent  w-4/5 px-10 py-6 rounded-md h-auto ">
            <h3 class=" text-center text-gray-700 font-bold text-2xl pb-4 font-mono " >Sign Up</h3>

            <form action="{% url 'register' %}" method="post" id="signin-form"   enctype="multipart/form-data">
                {% csrf_token %}
                <div class="grid grid-cols-2 gap-2 w-full mb-2 ">
                    <div class="">
                        <input class="form-control inp fname  w-full h-10 p-4 outline-none border border-gray-300 placeholder:text-gray-300 placeholder:font-semibold placeholder:text-sm rounded-md focus:border focus:border-purple-500 " type="text" name="firstname" placeholder="First Name " autocomplete="off" autofocus required>
                        <span class="star small"></span>
                    </div>
                    <div class="">
                        <input class="form-control inp lname w-full h-10 p-4 outline-none border border-gray-300 placeholder:text-gray-300 placeholder:font-semibold placeholder:text-sm rounded-md focus:border focus:border-purple-500 " type="text" name="lastname" placeholder="Last Name *" autocomplete="off" required>
                        <span class="star small"></span>
                    </div>
                </div>
                <div class="form-group mb-2">
                    <input id='usn' oninput="this.value = this.value.toUpperCase()" class="form-control inp usrname w-full h-10 p-4 outline-none border border-gray-300 placeholder:text-gray-300 placeholder:font-semibold placeholder:text-sm rounded-md focus:border focus:border-purple-500 " type="text" name="username" placeholder="USN *" autocomplete="off" required>
                    <p class='text-red-400 text-sm hidden' id='usnError' >Enter a valid usn (ex: U02JM21S0000)</p>
                    <span class="star small text-red-400 text-sm">{{message}}</span>
                </div>
                <div class="form-group mb-2">
                    <input id='email' class="form-control inp email  w-full h-10 p-4 outline-none border border-gray-300 placeholder:text-gray-300 placeholder:font-semibold placeholder:text-sm rounded-md focus:border focus:border-purple-500 " type="email" name="email" placeholder="Email Address *" autocomplete="off" required >
                    <span id='emailError' class="text-red-400 text-sm hidden">Enter a valid email (ex: xyz@sbca.in)</span>
                    <span class="star small text-red-400 text-sm ">{{emailmessage}}</span>
                </div>
                <div class="form-group mb-2">
                    <input class="form-control inp pswd w-full h-10 p-4 outline-none border border-gray-300 placeholder:text-gray-300 placeholder:font-semibold placeholder:text-sm rounded-md focus:border focus:border-purple-500 " type="password" name="password" placeholder="Password *" autocomplete="off" required ">
                    <span class="star small"></span>
                </div>
                <div class="form-group mb-2">
                    <input class="form-control inp cpswd w-full h-10 p-4 outline-none border border-gray-300 placeholder:text-gray-300 placeholder:font-semibold placeholder:text-sm rounded-md focus:border focus:border-purple-500 " type="password" name="confirmation" placeholder="Confirm Password *" autocomplete="off" required autocomplete="off">
                    <span class="star small text-red-400 text-sm"></span>
                </div>
                <div class="form-group mb-2">
                    <div class="custom-file w-full flex flex-col " for="profile" >
                        <label class="custom-file-label pb-1 text-gray-700 " for="profile">Choose profile picture</label>
                        <input type="file" name="profile" class="form-control custom-file-input h-10 border file:mr-2 file:text-sm file:shadow-none file:px-2   file:bg-gray-300 rounded bg-gray-50 file:border-none  file:h-10  file:text-gray-900 file:rounded " id="profile" accept="image/jpeg,image/png,image/webp,image/gif" data-focusable="true" aria-describedby="inputGroupFileAddon01" autocomplete="off">
                        <span class="star small"></span>
                    </div>
                </div>
                <div class="form-group mb-2">
                    <div class="custom-file  w-full flex flex-col">
                        <label class="custom-file-label pb-1 text-gray-700" for="cover">Choose cover picture</label>
                        <input type="file" name="cover" class="form-control custom-file-input h-10 border file:mr-2 file:text-sm file:shadow-none file:px-2  file:bg-gray-300 rounded bg-gray-50 file:border-none  file:h-10  file:text-gray-900 file:rounded " id="cover" accept="image/jpeg,image/png,image/webp,image/gif" data-focusable="true" aria-describedby="inputGroupFileAddon01" autocomplete="off" >
                        <span class="star small"></span>
                    </div>
                </div>


                <div>
                    <input class=" w-full text-center p-2 mt-6 bg-purple-500 text-white rounded-md " type="submit" value="Sign Up" id='submitButton' disabled>
                </div>
                
            </form>
        </div>
            <div class=" absolute left-2/4 bottom-5 -translate-x-2/4 " > Already have an account?&nbsp;&nbsp;<a href="{% url 'login' %}" class="text-black font-bold" >Log in</a></div>
    </div>
    <!-- this div is for second grid animation -->
    <div class="w-full h-full flex justify-center items-center bg-purple-50 ">
        <iframe src="{% static 'signup_animation.svg' %}" frameborder="0" width="500" height="500" ></iframe>
    </div>
    
    
</div>
        <script>
            const usnRegex = /^U02JM21S\d{4}$/;
            const usnError = document.getElementById('usnError');
            const submitbutton = document.getElementById('submitButton');
            const emailRegex = /^[a-zA-Z0-9._%+-]+@sbca\.in$/;
            const emailError = document.getElementById('emailError');



            const form = document.querySelector('form');
            form.addEventListener('input',()=>{
            const usnInput = document.getElementById('usn');
            const emailInput = document.getElementById('email');



            if(usnRegex.test(usnInput.value) && emailRegex.test(emailInput.value)){
                submitbutton.disabled = false;
                console.log("working")
            }
            else{
                submitbutton.disabled = true;
                console.log("avail")
            }
            });

            document.getElementById('usn').addEventListener('keyup',()=>{
            const usnInput = document.getElementById('usn');
            const emailInput = document.getElementById('email');



            if(!usnRegex.test(usnInput.value) ){
                usnError.classList.remove('hidden');
            }
            else{
                usnError.classList.add('hidden');
            }
            });

            




            document.getElementById('email').addEventListener('keyup',()=>{
            const emailInput = document.getElementById('email');


            if(!emailRegex.test(emailInput.value)){
                emailError.classList.remove('hidden');
            }
            else{
                emailError.classList.add('hidden');
            }
            });
        </script>
    
    
{% endblock %}
